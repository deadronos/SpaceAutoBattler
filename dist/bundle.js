var en=Object.defineProperty;var Gn=(n,t,s)=>t in n?en(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var tn=(n,t)=>()=>(n&&(t=n(n=0)),t);var nn=(n,t)=>{for(var s in t)en(n,s,{get:t[s],enumerable:!0})};var on=(n,t,s)=>Gn(n,typeof t!="symbol"?t+"":t,s);function pn(n){if(!n)return!1;if(typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext)return!0;try{return!!n.getExtension("OES_element_index_uint")}catch{return!1}}function mn(n,t=65535){if(n<=0)return[];let s=[],i=n,l=0;for(;i>0;){let o=Math.min(i,t);s.push({start:l,count:o}),l+=o,i-=o}return s}var _n=tn(()=>{});var vn={};nn(vn,{computeShipBatchRanges:()=>ii,createWebGLRenderer:()=>ni});function gn(n,t,s){let i=n.createShader(t);if(n.shaderSource(i,s),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS)){let l=n.getShaderInfoLog(i);throw n.deleteShader(i),new Error("Shader compile error: "+l)}return i}function Xe(n,t,s){let i=gn(n,n.VERTEX_SHADER,t),l=gn(n,n.FRAGMENT_SHADER,s),o=n.createProgram();if(n.attachShader(o,i),n.attachShader(o,l),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS)){let r=n.getProgramInfoLog(o);throw n.deleteProgram(o),new Error("Program link error: "+r)}return o}function ni(n,t={}){let{webgl2:s=!1}=t,i=typeof t.maxDevicePixelRatio=="number"?t.maxDevicePixelRatio:1.5,l=t.atlasAccessor||null,o=t.atlasLODs||[1],r=typeof t.maxUploadsPerFrame=="number"?t.maxUploadsPerFrame:2,u=!!t.atlasUseMipmaps,f=typeof t.atlasMaxSize=="number"?t.atlasMaxSize:2048,e=null,c=!1,m=new Map,_=[],x=new Set,b=new Float32Array([-.5,-.5,0,1,.5,-.5,1,1,.5,.5,1,0,-.5,.5,0,0]),E=new Uint16Array([0,1,2,0,2,3]),P="attribute vec2 a_pos; attribute vec2 a_uv; uniform vec2 u_resolution; uniform vec2 u_pos; uniform vec2 u_scale; uniform float u_rotation; varying vec2 v_uv; void main(){ vec2 p = a_pos * u_scale; float c = cos(u_rotation); float s = sin(u_rotation); vec2 rp = vec2(p.x * c - p.y * s, p.x * s + p.y * c); vec2 pixelPos = u_pos + rp; vec2 clip = (pixelPos / u_resolution) * 2.0 - 1.0; clip.y = -clip.y; gl_Position = vec4(clip, 0.0, 1.0); v_uv = a_uv; }",y="precision mediump float; uniform sampler2D u_tex; uniform vec4 u_tint; varying vec2 v_uv; void main(){ vec4 t = texture2D(u_tex, v_uv); gl_FragColor = vec4(t.rgb * u_tint.rgb, t.a * u_tint.a); }",R="attribute vec2 a_pos; attribute vec2 a_uv; uniform vec2 u_resolution; varying vec2 v_uv; void main(){ vec2 clip = (a_pos / u_resolution) * 2.0 - 1.0; clip.y = -clip.y; gl_Position = vec4(clip, 0.0, 1.0); v_uv = a_uv; }",S=y,ee=`#version 300 es
  in vec2 a_pos;
  in vec2 a_uv;
  in vec2 a_off; in vec2 a_scale; in float a_rot; in vec4 a_tint; in float a_shield;
  uniform vec2 u_resolution;
  out vec2 v_uv; out vec4 v_tint; out float v_shield;
  void main(){ vec2 p = a_pos * a_scale; float c = cos(a_rot); float s = sin(a_rot); vec2 rp = vec2(p.x * c - p.y * s, p.x * s + p.y * c); vec2 pixelPos = a_off + rp; vec2 clip = (pixelPos / u_resolution) * 2.0 - 1.0; clip.y = -clip.y; gl_Position = vec4(clip, 0.0, 1.0); v_uv = a_uv; v_tint = a_tint; v_shield = a_shield; }
  `,H=`#version 300 es
  precision mediump float;
  uniform sampler2D u_tex;
  in vec2 v_uv; in vec4 v_tint; in float v_shield;
  out vec4 outColor;
  void main(){ vec4 t = texture(u_tex, v_uv); vec3 col = t.rgb * v_tint.rgb;
    // subtle shield tint boost
    col = mix(col, vec3(0.6,0.8,1.0), clamp(v_shield * 0.25, 0.0, 1.0));
    float a = t.a * v_tint.a; outColor = vec4(col, a);
  }
  `,ye="attribute vec2 a_pos; attribute vec2 a_uv; varying vec2 v_uv; uniform vec2 u_resolution; uniform vec2 u_pos; uniform vec2 u_scale; void main(){ v_uv = a_uv; vec2 p = a_pos * u_scale + u_pos; vec2 clip = (p / u_resolution) * 2.0 - 1.0; clip.y = -clip.y; gl_Position = vec4(clip, 0.0, 1.0); }",be="precision mediump float; uniform vec4 u_color; varying vec2 v_uv; void main(){ vec2 uv = v_uv; vec2 d = uv - vec2(0.5,0.5); float dist = length(d) * 2.0; float alpha = 1.0 - smoothstep(0.85, 1.0, dist); float glow = 0.15 * (1.0 - smoothstep(0.6, 1.2, dist)); float outA = clamp(u_color.a * alpha + glow * u_color.a, 0.0, 1.0); gl_FragColor = vec4(u_color.rgb * outA, outA); }",V=null,_e=null,A=null,se=null,Fe=null,ke=null,gt=null,vt=null,$e=null,Y=null,le=null,v=null,te=null;function Vt(h){if(!h||!h.canvas)return null;if(m.has(h.canvas))return m.get(h.canvas);if(!e)return null;let G=e.createTexture();e.bindTexture(e.TEXTURE_2D,G);try{e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0);let B=h.canvas;try{let F=B.width||h.size||0,q=B.height||h.size||0;if(f>0&&Math.max(F,q)>f&&typeof document<"u"){let k=document.createElement("canvas"),ne=f/Math.max(F,q);k.width=Math.max(1,Math.floor(F*ne)),k.height=Math.max(1,Math.floor(q*ne));let O=k.getContext("2d");O&&O.drawImage(B,0,0,k.width,k.height),B=k}}catch{}if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,B),u){let F=B.width||h.size||0,q=B.height||h.size||0,k=ne=>(ne&ne-1)===0;k(F)&&k(q)?(e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)}else e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}catch{let F=new Uint8Array([255,255,255,255]);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,F),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}let C={tex:G,size:h.size,baseRadius:h.baseRadius,canvas:h.canvas};return m.set(h.canvas,C),x.delete(h.canvas),C}function Yt(h,G=!1){return!h||!h.canvas?null:m.has(h.canvas)?m.get(h.canvas):e?G?Vt(h):(x.has(h.canvas)||(x.add(h.canvas),_.push(h)),null):null}function Pn(){if(e=n.getContext(s?"webgl2":"webgl"),!e)return!1;e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),V=Xe(e,P,y),_e=Xe(e,R,S);try{typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext&&(A=Xe(e,ee,H))}catch{A=null}if(se=Xe(e,ye,be),Fe=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,Fe),e.bufferData(e.ARRAY_BUFFER,b,e.STATIC_DRAW),ke=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,ke),e.bufferData(e.ELEMENT_ARRAY_BUFFER,E,e.STATIC_DRAW),gt=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,gt),e.bufferData(e.ARRAY_BUFFER,1024,e.DYNAMIC_DRAW),vt=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,vt),e.bufferData(e.ELEMENT_ARRAY_BUFFER,1024,e.DYNAMIC_DRAW),instVBO=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,instVBO),e.bufferData(e.ARRAY_BUFFER,1024,e.DYNAMIC_DRAW),d._batchVBOCapacity=1024,d._batchIBOCapacity=1024,d._instanceVBOCapacity=1024,Y={a_pos:e.getAttribLocation(V,"a_pos"),a_uv:e.getAttribLocation(V,"a_uv"),u_resolution:e.getUniformLocation(V,"u_resolution"),u_pos:e.getUniformLocation(V,"u_pos"),u_scale:e.getUniformLocation(V,"u_scale"),u_rotation:e.getUniformLocation(V,"u_rotation"),u_tint:e.getUniformLocation(V,"u_tint"),u_tex:e.getUniformLocation(V,"u_tex")},le={a_pos:e.getAttribLocation(_e,"a_pos"),a_uv:e.getAttribLocation(_e,"a_uv"),u_resolution:e.getUniformLocation(_e,"u_resolution"),u_tint:e.getUniformLocation(_e,"u_tint"),u_tex:e.getUniformLocation(_e,"u_tex")},A){let h=e}te={a_pos:e.getAttribLocation(se,"a_pos"),a_uv:e.getAttribLocation(se,"a_uv"),u_resolution:e.getUniformLocation(se,"u_resolution"),u_pos:e.getUniformLocation(se,"u_pos"),u_scale:e.getUniformLocation(se,"u_scale"),u_color:e.getUniformLocation(se,"u_color")};try{d._isWebGL2=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext}catch{d._isWebGL2=!1}if(d._isWebGL2){let h="attribute vec2 a_pos; attribute vec2 a_uv; attribute vec2 a_offset; attribute vec2 a_scale; attribute float a_rotation; attribute vec4 a_tint; varying vec2 v_uv; varying vec4 v_tint; uniform vec2 u_resolution; void main(){ vec2 p = a_pos * a_scale; float c = cos(a_rotation); float s = sin(a_rotation); vec2 rp = vec2(p.x * c - p.y * s, p.x * s + p.y * c); vec2 pixelPos = a_offset + rp; vec2 clip = (pixelPos / u_resolution) * 2.0 - 1.0; clip.y = -clip.y; gl_Position = vec4(clip, 0.0, 1.0); v_uv = a_uv; v_tint = a_tint; }",G="precision mediump float; uniform sampler2D u_tex; varying vec2 v_uv; varying vec4 v_tint; void main(){ vec4 t = texture2D(u_tex, v_uv); gl_FragColor = vec4(t.rgb * v_tint.rgb, t.a * v_tint.a); }";try{A=Xe(e,h,G),v={a_pos:e.getAttribLocation(A,"a_pos"),a_uv:e.getAttribLocation(A,"a_uv"),a_offset:e.getAttribLocation(A,"a_offset"),a_scale:e.getAttribLocation(A,"a_scale"),a_rotation:e.getAttribLocation(A,"a_rotation"),a_tint:e.getAttribLocation(A,"a_tint"),u_resolution:e.getUniformLocation(A,"u_resolution"),u_tex:e.getUniformLocation(A,"u_tex")},$e=e.createBuffer()}catch{A=null,v=null,$e=null,d._isWebGL2=!1}}try{d._supportsUint32Indices=pn(e)}catch{d._supportsUint32Indices=!1}return d._tmp={verts:null,indices:null,inst:null},A&&typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext&&(d._instLoc={a_pos:e.getAttribLocation(A,"a_pos"),a_uv:e.getAttribLocation(A,"a_uv"),a_off:e.getAttribLocation(A,"a_off"),a_scale:e.getAttribLocation(A,"a_scale"),a_rot:e.getAttribLocation(A,"a_rot"),a_tint:e.getAttribLocation(A,"a_tint"),a_shield:e.getAttribLocation(A,"a_shield"),u_resolution:e.getUniformLocation(A,"u_resolution"),u_tex:e.getUniformLocation(A,"u_tex")}),d._tempVertArr=null,d._tempIdxArr=null,d._tempVertCapacity=0,d._tempIdxCapacity=0,d._instFloatArr=null,d._instCapacity=0,d._dpr=1,!0}function pi(h,G,C,B,F,q){if(!h)return;e.useProgram(V),e.bindBuffer(e.ARRAY_BUFFER,Fe),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,ke),Y.a_pos!==-1&&(e.enableVertexAttribArray(Y.a_pos),e.vertexAttribPointer(Y.a_pos,2,e.FLOAT,!1,16,0)),Y.a_uv!==-1&&(e.enableVertexAttribArray(Y.a_uv),e.vertexAttribPointer(Y.a_uv,2,e.FLOAT,!1,16,8));let k=d._dpr||1;e.uniform2f(Y.u_resolution,e.drawingBufferWidth,e.drawingBufferHeight),e.uniform2f(Y.u_pos,G*k,C*k);let ne=B*2/(h.baseRadius*2),O=h.size*ne*k,D=h.size*ne*k;e.uniform2f(Y.u_scale,O,D),e.uniform1f(Y.u_rotation,F||0),e.uniform4f(Y.u_tint,q[0],q[1],q[2],q[3]),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,h.tex),e.uniform1i(Y.u_tex,0),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}function xt(h,G,C,B){e.useProgram(se),e.bindBuffer(e.ARRAY_BUFFER,Fe),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,ke),te.a_pos!==-1&&(e.enableVertexAttribArray(te.a_pos),e.vertexAttribPointer(te.a_pos,2,e.FLOAT,!1,16,0)),te.a_uv!==-1&&(e.enableVertexAttribArray(te.a_uv),e.vertexAttribPointer(te.a_uv,2,e.FLOAT,!1,16,8));let F=d._dpr||1;e.uniform2f(te.u_resolution,e.drawingBufferWidth,e.drawingBufferHeight),e.uniform2f(te.u_pos,h*F,G*F),e.uniform2f(te.u_scale,C*2*F,C*2*F),e.uniform4f(te.u_color,B[0],B[1],B[2],B[3]),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}let d={type:"webgl",webgl2:s,_supportsUint32Indices:!1,init(){try{if(!Pn())return!1;if(l)try{let h=["corvette","frigate","destroyer","carrier","fighter"];for(let G of h)for(let C of o){let B=l(G,C);B&&Yt(B)}}catch{}return!0}catch{return e=null,!1}},start(h){c=!0,h&&h()},stop(){c=!1},isRunning(){return c},render(h){if(!e)return;let G=typeof window<"u"&&window.devicePixelRatio||1,C=Math.max(1,Math.min(G,i));d._dpr=C;let B=n.clientWidth||n.width||800,F=n.clientHeight||n.height||600,q=Math.max(1,Math.floor(B*C)),k=Math.max(1,Math.floor(F*C));(n.width!==q||n.height!==k)&&(n.width=q,n.height=k),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.clearColor(.02,.02,.03,1),e.clear(e.COLOR_BUFFER_BIT);let ne=0;for(;ne<r&&_.length>0;){let O=_.shift();try{Vt(O)}catch{}ne++}if(h.bullets)for(let O of h.bullets){let D=O.team===0?[1,.35,.35,.95]:[.31,.62,1,.95];xt(O.x,O.y,O.radius||2.2,D)}if(h.ships){let O=new Map;for(let D of h.ships){if(!D.alive)continue;let z=null;try{z=l?l(D.type,D.radius):null}catch{z=null}let ze=D.team===0?[1,.35,.35,.96]:[.31,.63,1,.96];if(!z||!z.canvas){xt(D.x,D.y,D.radius||8,ze);continue}let we=Yt(z);if(!we||!we.tex){xt(D.x,D.y,D.radius||8,ze);continue}let ie=z.canvas&&typeof z.canvas.id<"u"?z.canvas.id:z.canvas,K=O.get(ie);K||(K={atlasInfo:we,byTeam:new Map},O.set(ie,K));let Ke=K.byTeam.get(D.team)||[];Ke.push(D),K.byTeam.set(D.team,Ke)}for(let[D,z]of O.entries())for(let[ze,we]of z.byTeam.entries()){let ie=z.atlasInfo,K=we.length;if(K===0)continue;if(d._isWebGL2&&A&&$e){let ge=K*10;(!d._instFloatArr||d._instCapacity<ge)&&(d._instFloatArr=new Float32Array(ge),d._instCapacity=ge);let N=d._instFloatArr.subarray(0,ge),Q=0;for(let W=0;W<K;W++){let X=we[W],$=X.radius*2/(ie.baseRadius*2),Ce=ie.size*$*C,Ee=ie.size*$*C;N[Q++]=X.x*C,N[Q++]=X.y*C,N[Q++]=Ce,N[Q++]=Ee,N[Q++]=X.angle||0;let j=X.team===0?[1,.35,.35,.96]:[.31,.63,1,.96];N[Q++]=j[0],N[Q++]=j[1],N[Q++]=j[2],N[Q++]=j[3];let Ne=typeof X.shield=="number"&&typeof X.shieldMax=="number"&&X.shieldMax>0?Math.max(0,Math.min(1,X.shield/X.shieldMax)):0;N[Q++]=Ne}e.useProgram(A),e.bindBuffer(e.ARRAY_BUFFER,Fe),v&&v.a_pos!==-1&&(e.enableVertexAttribArray(v.a_pos),e.vertexAttribPointer(v.a_pos,2,e.FLOAT,!1,16,0),e.vertexAttribDivisor(v.a_pos,0)),v&&v.a_uv!==-1&&(e.enableVertexAttribArray(v.a_uv),e.vertexAttribPointer(v.a_uv,2,e.FLOAT,!1,16,8),e.vertexAttribDivisor(v.a_uv,0)),e.bindBuffer(e.ARRAY_BUFFER,$e);let ce=N.byteLength;if(ce<=d._instanceVBOCapacity)e.bufferSubData(e.ARRAY_BUFFER,0,N);else{let W=Math.max(ce,d._instanceVBOCapacity*2||ce);e.bufferData(e.ARRAY_BUFFER,W,e.DYNAMIC_DRAW),e.bufferSubData(e.ARRAY_BUFFER,0,N),d._instanceVBOCapacity=W}let fe=40;v&&v.a_offset!==-1&&(e.enableVertexAttribArray(v.a_offset),e.vertexAttribPointer(v.a_offset,2,e.FLOAT,!1,fe,0),e.vertexAttribDivisor(v.a_offset,1)),v&&v.a_scale!==-1&&(e.enableVertexAttribArray(v.a_scale),e.vertexAttribPointer(v.a_scale,2,e.FLOAT,!1,fe,8),e.vertexAttribDivisor(v.a_scale,1)),v&&v.a_rotation!==-1&&(e.enableVertexAttribArray(v.a_rotation),e.vertexAttribPointer(v.a_rotation,1,e.FLOAT,!1,fe,16),e.vertexAttribDivisor(v.a_rotation,1)),v&&v.a_tint!==-1&&(e.enableVertexAttribArray(v.a_tint),e.vertexAttribPointer(v.a_tint,4,e.FLOAT,!1,fe,20),e.vertexAttribDivisor(v.a_tint,1)),v&&v.a_shield!==-1&&(e.enableVertexAttribArray(v.a_shield),e.vertexAttribPointer(v.a_shield,1,e.FLOAT,!1,fe,36),e.vertexAttribDivisor(v.a_shield,1)),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,ke),e.uniform2f(v.u_resolution,e.drawingBufferWidth,e.drawingBufferHeight),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,ie.tex),e.uniform1i(v.u_tex,0),e.drawElementsInstanced(e.TRIANGLES,6,e.UNSIGNED_SHORT,0,K);continue}let Ke=d._supportsUint32Indices?Number.MAX_SAFE_INTEGER:65535,yt=Math.max(1,Math.floor(Ke/4));for(let ge=0;ge<K;ge+=yt){let N=Math.min(yt,K-ge),Q=N*4,ce=N*6,fe=Q*4;(!d._tempVertArr||d._tempVertCapacity<fe)&&(d._tempVertArr=new Float32Array(fe),d._tempVertCapacity=fe);let W=d._tempVertArr.subarray(0,fe),X=d._supportsUint32Indices?Uint32Array:Uint16Array;!d._tempIdxArr||d._tempIdxCapacity<ce?(d._tempIdxArr=new X(ce),d._tempIdxCapacity=ce):d._tempIdxArr instanceof X||(d._tempIdxArr=new X(ce),d._tempIdxCapacity=ce);let $=d._tempIdxArr.subarray(0,ce),Ce=0,Ee=0,j=0;for(let ve=0;ve<N;ve++){let je=we[ge+ve],qt=je.radius*2/(ie.baseRadius*2),In=ie.size*qt*C,Sn=ie.size*qt*C,Je=In*.5,Ze=Sn*.5,$t=je.angle||0,zt=Math.cos($t),Kt=Math.sin($t),Dn=je.x*C,Un=je.y*C,Qt=[[-Je,-Ze],[Je,-Ze],[Je,Ze],[-Je,Ze]],jt=[[0,1],[1,1],[1,0],[0,0]];for(let Pe=0;Pe<4;Pe++){let Jt=Qt[Pe][0],Zt=Qt[Pe][1],Fn=Jt*zt-Zt*Kt,kn=Jt*Kt+Zt*zt,Nn=Dn+Fn,Hn=Un+kn;W[Ce++]=Nn,W[Ce++]=Hn,W[Ce++]=jt[Pe][0],W[Ce++]=jt[Pe][1]}$[Ee++]=j+0,$[Ee++]=j+1,$[Ee++]=j+2,$[Ee++]=j+0,$[Ee++]=j+2,$[Ee++]=j+3,j+=4}e.useProgram(_e),e.bindBuffer(e.ARRAY_BUFFER,gt);let Ne=W.byteLength;if(Ne<=d._batchVBOCapacity)e.bufferSubData(e.ARRAY_BUFFER,0,W);else{let ve=Math.max(Ne,d._batchVBOCapacity*2||Ne);e.bufferData(e.ARRAY_BUFFER,ve,e.DYNAMIC_DRAW),e.bufferSubData(e.ARRAY_BUFFER,0,W),d._batchVBOCapacity=ve}e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,vt);let Et=$.byteLength;if(Et<=d._batchIBOCapacity)e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,$);else{let ve=Math.max(Et,d._batchIBOCapacity*2||Et);e.bufferData(e.ELEMENT_ARRAY_BUFFER,ve,e.DYNAMIC_DRAW),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,$),d._batchIBOCapacity=ve}le.a_pos!==-1&&(e.enableVertexAttribArray(le.a_pos),e.vertexAttribPointer(le.a_pos,2,e.FLOAT,!1,16,0)),le.a_uv!==-1&&(e.enableVertexAttribArray(le.a_uv),e.vertexAttribPointer(le.a_uv,2,e.FLOAT,!1,16,8)),e.uniform2f(le.u_resolution,e.drawingBufferWidth,e.drawingBufferHeight);let Qe=ze===0?[1,.35,.35,.96]:[.31,.63,1,.96];e.uniform4f(le.u_tint,Qe[0],Qe[1],Qe[2],Qe[3]),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,ie.tex),e.uniform1i(le.u_tex,0);let Bn=d._supportsUint32Indices?e.UNSIGNED_INT:e.UNSIGNED_SHORT;e.drawElements(e.TRIANGLES,$.length,Bn,0)}}}}};return d.runDiagnostic=function(h=3){try{d._diagCounter=Math.max(0,Number(h)||3)}catch{}},d.temporarilyLowerOverlay=function(){return!1},d.destroy=function(){e=null,c=!1},d}function ii(n=[],t=null,s=1,i=!1){let l=new Map;for(let r of n){if(!r||!r.alive)continue;let u=null;try{u=t?t(r.type,r.radius):null}catch{u=null}if(!u||!u.canvas)continue;let f=u.canvas&&typeof u.canvas.id<"u"?u.canvas.id:u.canvas,e=l.get(f);e||(e={atlas:u,byTeam:new Map},l.set(f,e));let c=e.byTeam.get(r.team)||[];c.push(r),e.byTeam.set(r.team,c)}let o=[];for(let[r,u]of l.entries())for(let[f,e]of u.byTeam.entries()){let c=e.length,m=c*4,_=i?Number.MAX_SAFE_INTEGER:65535,x=mn(m,_);o.push({atlasCanvas:r,team:f,totalQuads:c,totalVertices:m,ranges:x})}return o}var xn=tn(()=>{_n()});var bt=!1,et=123456789;function rn(n){bt=!0,et=n>>>0}function an(){bt=!1}function On(){return bt?(et=1664525*et+1013904223>>>0,et/4294967296):Math.random()}function p(n=0,t=1){return n+(t-n)*On()}function He(n,t){return Math.floor(p(n,t+1))}var sn={corvette:6.5,frigate:5,destroyer:3.2,carrier:2,fighter:8},ln=1.2,wt=.6;var g={RED:0,BLUE:1},Rt=class{constructor(t,s,i,l,o,r=null){this.x=t,this.y=s,this.vx=i,this.vy=l,this.team=o,this.ownerId=r,this.life=2.5,this.radius=2.2,this.dmg=p(8,14)}update(t){this.x+=this.vx*t,this.y+=this.vy*t,this.life-=t}alive(t=null){if(this.life<=0)return!1;if(!t)return!0;let{W:s,H:i}=t;return this.x>-50&&this.x<s+50&&this.y>-50&&this.y<i+50}},tt=class tt{constructor(t,s,i,l="corvette"){this.team=t,this.x=s,this.y=i,this.vx=0,this.vy=0,this.angle=0,this.type=l;let o={corvette:{radius:8,maxSpeed:p(120,160),accel:240,turn:6.5,hp:p(40,70),reload:p(.18,.28),vision:220,range:140},frigate:{radius:10,maxSpeed:p(90,120),accel:200,turn:5,hp:p(80,120),reload:p(.24,.4),vision:280,range:180},destroyer:{radius:14,maxSpeed:p(60,90),accel:150,turn:3.2,hp:p(150,220),reload:p(.4,.7),vision:320,range:220},carrier:{radius:18,maxSpeed:p(40,70),accel:90,turn:2,hp:p(220,300),reload:p(.6,1.2),vision:360,range:260,launchBase:p(3.5,6)},fighter:{radius:6,maxSpeed:p(160,220),accel:300,turn:8,hp:p(18,32),reload:p(.12,.22),vision:180,range:120}},r=o[l]||o.corvette;this.radius=r.radius,this.maxSpeed=r.maxSpeed,this.accel=r.accel,this.turn=r.turn||sn[l]||4.5,this.hpMax=r.hp,this.hp=this.hpMax,this.cooldown=0,this.reload=r.reload,this.vision=r.vision,this.range=r.range,this.id=tt._id++,this.kills=0,this.alive=!0,this._exploded=!1,this.level=1,this.xp=0,this.baseHpMax=this.hpMax,this.baseDmg=10,this.shieldMax=Math.round(this.hpMax*.6),this.shield=this.shieldMax,this.shieldRegen=Math.max(.5,this.shieldMax*.06),this.recentHitTimer=0,l==="carrier"?(this.isCarrier=!0,this.launchCooldown=r.launchBase*p(.8,1.4),this.launchAmount=Math.max(1,Math.floor(p(1,3))),this.maxFighters=6,this.activeFighters=[]):(this.isCarrier=!1,this.launchCooldown=0)}xpToNext(t=100,s=1.35){return Math.floor(t*Math.pow(s,Math.max(0,this.level-1)))}applyLevel(){let t=.06,s=.1,i=.08;this.hpMax=Math.round(this.baseHpMax*(1+s*(this.level-1)));let l=Math.round(this.baseHpMax*.6);this.shieldMax=Math.round(l*(1+i*(this.level-1))),this.hp=Math.min(this.hp,this.hpMax),this.shield=Math.min(this.shield,this.shieldMax)}gainXp(t){if(!(t<=0))for(this.xp+=t;this.xp>=this.xpToNext();)this.xp-=this.xpToNext(),this.level++,this.applyLevel()}pickTarget(t){let s=null,i=1/0,l=this.vision*this.vision;for(let o of t){if(!o.alive||o.team===this.team)continue;let r=o.x-this.x,u=o.y-this.y,f=r*r+u*u;f<l&&f<i&&(i=f,s=o)}return s}update(t,s){if(!this.alive)return;let i=this.pickTarget(s),l=this.recentHitTimer>0,o=0,r=0,u=1;if(i&&!l){let y=i.x-this.x,R=i.y-this.y;u=Math.hypot(y,R)||1;let S=Math.max(0,Math.min(1.2,u/240)),ee=i.x+(i.vx||0)*S,H=i.y+(i.vy||0)*S;o=ee-this.x,r=H-this.y;let ye=Math.hypot(o,r)||1;o/=ye,r/=ye}else if(i&&l){let y=i.x-this.x,R=i.y-this.y;u=Math.hypot(y,R)||1,o=-(y/u),r=-(R/u)}else o=Math.cos(this.angle),r=Math.sin(this.angle);let f=0,e=0,c=0,m=26;for(let y of s){if(!y.alive||y===this||y.team!==this.team)continue;let R=this.x-y.x,S=this.y-y.y,ee=R*R+S*S;if(ee<m*m&&ee>1){let H=Math.sqrt(ee);f+=R/H,e+=S/H,c++}}c>0&&(f/=c,e/=c);let x=Math.atan2(r,o)-this.angle;for(;x>Math.PI;)x-=2*Math.PI;for(;x<-Math.PI;)x+=2*Math.PI;let b=this.turn*t;x>b?x=b:x<-b&&(x=-b),this.angle+=x;let E=l?this.accel*ln:this.accel;this.vx+=Math.cos(this.angle)*E*t,this.vy+=Math.sin(this.angle)*E*t,c>0&&(this.vx+=f*(this.accel*wt)*t,this.vy+=e*(this.accel*wt)*t);let P=Math.hypot(this.vx,this.vy);if(P>this.maxSpeed){let y=this.maxSpeed/P;this.vx*=y,this.vy*=y}if(this.x+=this.vx*t,this.y+=this.vy*t,i){let y=i.x-this.x,R=i.y-this.y,S=Math.hypot(y,R)||1;if(S<this.range){let ee=Math.cos(this.angle)*(y/S)+Math.sin(this.angle)*(R/S);if(this.cooldown<=0&&ee>.2){let H=300+p(-20,20),ye=y/S,be=R/S;arguments.length>=3&&Array.isArray(arguments[2])&&arguments[2].push(new Rt(this.x+ye*12,this.y+be*12,ye*H+this.vx*.2,be*H+this.vy*.2,this.team,this.id)),this.cooldown=this.reload}}}this.cooldown-=t,this.shield<this.shieldMax&&(this.shield=Math.min(this.shieldMax,this.shield+this.shieldRegen*t)),this.recentHitTimer>0&&(this.recentHitTimer=Math.max(0,this.recentHitTimer-t))}damage(t){let s=t,i=0;return this.shield>0&&t>0&&(i=Math.min(this.shield,t),this.shield-=i,t-=i),t>0&&(this.hp-=t),(i>0||s>0&&t>0)&&(this.recentHitTimer=Math.max(this.recentHitTimer,1.2)),this.hp<=0&&this.alive?(this.type==="fighter"&&this.ownerCarrier,this.alive=!1,this._exploded=!0,{x:this.x,y:this.y,team:this.team,id:this.id,type:this.type,ownerCarrier:this.ownerCarrier}):null}};on(tt,"_id",1);var xe=tt;function nt(n,t,s,i,l=80){let o=[];for(let r=0;r<t;r++){let u=r%6*20+p(-10,10),f=Math.floor(r/6)*20+p(-10,10),e=p(0,1),c="corvette";e<.45?c="corvette":e<.75?c="frigate":e<.92?c="destroyer":c="carrier",o.push(new xe(n,s+(n===g.RED?-u:u),i+f,c))}return o}var Ut={};nn(Ut,{Particle:()=>Be,acquireParticle:()=>We,bullets:()=>pe,clamp:()=>Tt,evaluateReinforcement:()=>St,flashes:()=>oe,getReinforcementInterval:()=>Pt,handleReinforcement:()=>Ae,healthFlashes:()=>he,initStars:()=>ot,particlePool:()=>Le,particles:()=>re,processStateEvents:()=>ti,releaseParticle:()=>rt,reset:()=>Bt,resetReinforcementCooldowns:()=>Mt,setCarrierLaunchStrategy:()=>jn,setContinuousCheckbox:()=>at,setReinforcementInterval:()=>Ct,setReinforcementStrategy:()=>Jn,setSpawnCompositionStrategy:()=>ei,setToast:()=>Qn,shieldFlashes:()=>de,ships:()=>L,simulate:()=>Dt,stars:()=>Te});function cn(n,t,s={W:800,H:600}){for(let i of n.ships)i.alive&&i.update(t,n.ships,n.bullets);if(s&&typeof s.W=="number"&&typeof s.H=="number"){let i=s.W,l=s.H;for(let o of n.ships){if(!o.alive)continue;let r=o.radius||0;o.x<-r?o.x+=i+r*2:o.x>i+r&&(o.x-=i+r*2),o.y<-r?o.y+=l+r*2:o.y>l+r&&(o.y-=l+r*2)}}for(let i=n.bullets.length-1;i>=0;i--){let l=n.bullets[i];l.update(t),l.alive(s)||n.bullets.splice(i,1)}for(let i=n.bullets.length-1;i>=0;i--){let l=n.bullets[i];for(let o of n.ships){if(!o.alive||o.team===l.team)continue;let r=o.x-l.x,u=o.y-l.y,f=r*r+u*u,e=o.radius+l.radius;if(f<e*e){let c=l.dmg,m=typeof o.shield=="number"?o.shield:0,_=typeof o.hp=="number"?o.hp:0,x=o.damage(c),b=Math.max(0,m-(typeof o.shield=="number"?o.shield:0)),E=Math.max(0,_-(typeof o.hp=="number"?o.hp:0));b>0&&n&&Array.isArray(n.shieldHits)&&n.shieldHits.push({id:o.id,hitX:l.x,hitY:l.y,team:o.team,amount:b}),E>0&&n&&Array.isArray(n.healthHits)&&n.healthHits.push({id:o.id,hitX:l.x,hitY:l.y,team:o.team,amount:E}),Array.isArray(n.damageEvents)||(n.damageEvents=[]),l.ownerId!=null&&n.damageEvents.push({ownerId:l.ownerId,dmg:c}),n.bullets.splice(i,1),x&&n.explosions&&n.explosions.push(x),o.alive||(Array.isArray(n.killEvents)||(n.killEvents=[]),n.killEvents.push({id:o.id,type:o.type,ownerCarrier:o.ownerCarrier,level:o.level,team:o.team,killerId:l.ownerId,killerTeam:l.team,x:o.x,y:o.y}));break}}}}var it=Math.PI*2,Re=(n,t)=>n+(t-n)*Math.random(),Tt=(n,t,s)=>Math.max(t,Math.min(s,n)),Lt=n=>{if(typeof document<"u"){let t=document.getElementById("toast");t&&(t.textContent=n,t.classList.add("show"),setTimeout(()=>t.classList.remove("show"),1400))}};function Qn(n){Lt=n}var Te=[];function ot(){Te.length=0;let n=[.2,.5,1],t=typeof window<"u"?window.innerWidth:1024,s=typeof window<"u"?window.innerHeight:768;for(let i of n)for(let l=0;l<120;l++)Te.push({x:Re(0,t),y:Re(0,s),r:Re(.3,1.8)*i,d:i,tw:Re(.4,1),phase:Re(0,it)})}ot();var Le=[],re=[],Be=class{constructor(t,s,i,l,o,r){this.x=t,this.y=s,this.vx=i,this.vy=l,this.life=o,this.max=o,this.color=r}update(t){this.x+=this.vx*t,this.y+=this.vy*t,this.vx*=Math.pow(.9,t*60),this.vy*=Math.pow(.9,t*60),this.life-=t}};function We(n,t,s,i,l,o){let r;return Le.length>0?(r=Le.pop(),r.x=n,r.y=t,r.vx=s,r.vy=i,r.life=l,r.max=l,r.color=o):r=new Be(n,t,s,i,l,o),re.push(r),r}function rt(n){Le.length<2e3&&Le.push(n)}var oe=[],de=[],he=[],L=[],pe=[],Ge=0,ue={[g.RED]:0,[g.BLUE]:0},Oe={[g.RED]:0,[g.BLUE]:0};function Mt(){Oe[g.RED]=0,Oe[g.BLUE]=0}function Ct(n){Ge=Number(n)||0,ue[g.RED]=0,ue[g.BLUE]=0}function Pt(){return Ge}var At=null;function at(n){At=n}function Ae(n,t=null){if(!At||!At.checked)return;let s=2,i=["frigate","corvette","destroyer","carrier"],l=(r,u)=>{for(let f=0;f<u;f++){let e=i[He(0,i.length-1)],c=typeof window<"u"?window.innerWidth:1024,m=typeof window<"u"?window.innerHeight:768,_=r===g.RED?p(40,Math.max(120,c*.35)):p(Math.max(c*.65,c-240),c-40),x=p(80,Math.max(120,m-80));L.push(new xe(r,_,x,e))}},o=r=>{if(L.filter(f=>f.alive&&f.team===r).length<s&&(Oe[r]-=n,Oe[r]<=0)){let f=He(1,6);l(r,f),Oe[r]=p(3,8),Lt(`Reinforcements: +${f} ${r===g.RED?"Red":"Blue"}`)}};t===null?(o(g.RED),o(g.BLUE)):o(t)}function Bt(n=null){if(L.length=0,pe.length=0,re.length=0,oe.length=0,de.length=0,he.length=0,n!==null)rn(n>>>0),Lt(`Seed set to ${n>>>0}`);else try{an()}catch{}let t=typeof window<"u"?window.innerWidth:1024,s=typeof window<"u"?window.innerHeight:768;L.push(...nt(g.RED,12,t*.25,s*.5)),L.push(...nt(g.BLUE,12,t*.75,s*.5))}var It=(n,t,s)=>{let i=[];if(n.launchCooldown-=s,n.launchCooldown<=0){if((Array.isArray(n.activeFighters)?n.activeFighters.length:0)<(n.maxFighters||6)){let o=Math.max(1,Math.floor(n.launchAmount||1));for(let r=0;r<o&&!(n.activeFighters.length>=(n.maxFighters||6));r++){let u=p(0,it),f=n.radius+12+p(4,12),e=n.x+Math.cos(u)*f,c=n.y+Math.sin(u)*f,m=new xe(n.team,e,c,"fighter"),_=p(40,120);m.vx=Math.cos(u)*_+(n.vx||0)*.2,m.vy=Math.sin(u)*_+(n.vy||0)*.2,m.ownerCarrier=n.id,n.activeFighters.push(m.id),i.push(m)}}n.launchCooldown=p(2.5,6)}return i};function jn(n){It=n}var hn=(n,t)=>{Ae(n)};function Jn(n){hn=n}var Zn=(n,t,s,i)=>nt(n,t,s,i);function ei(n){Zn=n}function St(n){if(Ge<=0){Ae(n);return}ue[g.RED]+=n,ue[g.BLUE]+=n,ue[g.RED]>=Ge&&(Ae(ue[g.RED],g.RED),ue[g.RED]=0),ue[g.BLUE]>=Ge&&(Ae(ue[g.BLUE],g.BLUE),ue[g.BLUE]=0)}function Dt(n,t,s){for(let o of Te)o.phase+=n*.8*o.d;for(let o of L){if(!o.alive||!o.isCarrier)continue;let r=It(o,L,n);if(Array.isArray(r)&&r.length)for(let u of r)L.push(u)}for(let o of L)o.update(n,L);for(let o=pe.length-1;o>=0;o--){let r=pe[o];if(r.update(n),!r.alive()){pe.splice(o,1);continue}}let l={ships:L,bullets:pe,score:{red:0,blue:0},particles:re,explosions:[],shieldHits:[]};if(cn(l,n,{W:t,H:s}),l.explosions&&l.explosions.length)for(let o of l.explosions){oe.push({x:o.x,y:o.y,r:2,life:.25,team:o.team});for(let r=0;r<20;r++){let u=p(0,it),f=p(40,220);We(o.x,o.y,Math.cos(u)*f,Math.sin(u)*f,Re(.2,1),"rgba(255,255,255,$a)")}}if(Array.isArray(l.shieldHits)&&l.shieldHits.length)for(let o of l.shieldHits){let r=L.find(e=>e.id===o.id),u=r?r.x:o.hitX,f=r?r.y:o.hitY;oe.push({x:u,y:f,r:6+Math.min(12,o.amount),life:.12,team:o.team,shieldHit:!0});for(let e=0;e<6;e++){let c=p(0,it),m=p(40,120);We(o.hitX,o.hitY,Math.cos(c)*m,Math.sin(c)*m,Re(.12,.4),"rgba(200,230,255,$a)")}if(r){let e=Math.atan2(o.hitY-f,o.hitX-u);de.push({id:r.id,angle:e,life:.22,amount:o.amount})}}if(Array.isArray(l.healthHits)&&l.healthHits.length)for(let o of l.healthHits){let r=L.find(u=>u.id===o.id);r&&he.push({id:r.id,life:.45,amount:o.amount})}if(Array.isArray(l.damageEvents)&&l.damageEvents.length){for(let o of l.damageEvents)if(o&&o.ownerId!=null&&typeof o.dmg=="number"){let r=L.find(u=>u.id===o.ownerId);r&&r.gainXp(o.dmg*.05)}}if(Array.isArray(l.killEvents)&&l.killEvents.length){for(let o of l.killEvents)if(o){if(o.killerTeam===g.RED?l.score.red++:o.killerTeam===g.BLUE&&l.score.blue++,o.killerId!=null){let r=L.find(u=>u.id===o.killerId);r&&r.gainXp(20+(o.level||1)*.2)}if(o.type==="fighter"&&typeof o.ownerCarrier=="number"){let r=L.find(u=>u.id===o.ownerCarrier);if(r&&Array.isArray(r.activeFighters)){let u=r.activeFighters.indexOf(o.id);u>=0&&r.activeFighters.splice(u,1)}}if(o.type==="carrier"){let r=o.id;for(let f of L)f.alive&&f.type==="fighter"&&f.ownerCarrier===r&&(f.ownerCarrier=null);let u=L.find(f=>f.id===r);u&&Array.isArray(u.activeFighters)&&(u.activeFighters.length=0)}}}hn(n,L);for(let o=re.length-1;o>=0;o--){let r=re[o];r.update(n),r.life<=0&&(re.splice(o,1),rt(r))}for(let o=oe.length-1;o>=0;o--){let r=oe[o];r.life-=n,r.r+=600*n,r.life<=0&&oe.splice(o,1)}for(let o=de.length-1;o>=0;o--){let r=de[o];r.life-=n,r.life<=0&&de.splice(o,1)}for(let o=he.length-1;o>=0;o--){let r=he[o];r.life-=n,r.life<=0&&he.splice(o,1)}return{ships:L,bullets:pe,particles:re,flashes:oe,shieldFlashes:de,healthFlashes:he,stars:Te}}function ti(n,t=0){if(!(!n||!Array.isArray(n.ships))){for(let s of n.ships){if(!s.alive||!s.isCarrier)continue;let i=It(s,n.ships,t);if(Array.isArray(i)&&i.length)for(let l of i)n.ships.push(l)}if(Array.isArray(n.damageEvents)&&n.damageEvents.length){for(let s of n.damageEvents)if(s&&s.ownerId!=null&&typeof s.dmg=="number"){let i=n.ships.find(l=>l.id===s.ownerId);i&&i.gainXp(s.dmg*.05)}}if(Array.isArray(n.killEvents)&&n.killEvents.length){for(let s of n.killEvents)if(s){if(n.score||(n.score={red:0,blue:0}),s.killerTeam===g.RED?n.score.red++:s.killerTeam===g.BLUE&&n.score.blue++,s.killerId!=null){let i=n.ships.find(l=>l.id===s.killerId);i&&i.gainXp(20+(s.level||1)*.2)}if(s.type==="fighter"&&typeof s.ownerCarrier=="number"){let i=n.ships.find(l=>l.id===s.ownerCarrier);if(i&&Array.isArray(i.activeFighters)){let l=i.activeFighters.indexOf(s.id);l>=0&&i.activeFighters.splice(l,1)}}if(s.type==="carrier"){let i=s.id;for(let o of n.ships)o.alive&&o.type==="fighter"&&o.ownerCarrier===i&&(o.ownerCarrier=null);let l=n.ships.find(o=>o.id===i);l&&Array.isArray(l.activeFighters)&&(l.activeFighters.length=0)}}}}}typeof window<"u"&&(window.initRenderer=Cn);var w=null;typeof document<"u"&&(w=document.getElementById("world"));!w&&typeof document<"u"&&(w=document.createElement("canvas"),w.id="world",document.body&&document.body.appendChild(w));if(typeof globalThis.Path2D>"u"){class n{constructor(){}moveTo(){}lineTo(){}quadraticCurveTo(){}ellipse(){}arc(){}closePath(){}}globalThis.Path2D=n}var a=null,I=w&&w.width?w.width=typeof window<"u"?window.innerWidth:1024:1024,U=w&&w.height?w.height=typeof window<"u"?window.innerHeight:768:768;typeof window<"u"&&typeof window.addEventListener=="function"&&window.addEventListener("resize",()=>{I=w.width=window.innerWidth,U=w.height=window.innerHeight,ht(),Ve()});var J=Math.PI*2,Nt=Tt;function st(n){let t=document.getElementById("toast");t.textContent=n,t.classList.add("show"),setTimeout(()=>t.classList.remove("show"),1400)}var Rn=Te,Ve=ot,Ft=new Map;function oi(n){if(Ft.has(n))return Ft.get(n);let t=new Path2D;return n==="corvette"?(t.moveTo(1.5,0),t.lineTo(-1,-.7),t.lineTo(-.4,0),t.lineTo(-1,.7),t.closePath(),t.ellipse(0,0,.35,.25,0,0,J)):n==="frigate"?(t.moveTo(1.6,0),t.quadraticCurveTo(.2,-1.1,-1.1,-.6),t.lineTo(-.6,0),t.lineTo(-1.1,.6),t.quadraticCurveTo(.2,1.1,1.6,0),t.closePath()):n==="destroyer"?(t.moveTo(1.9,0),t.lineTo(.3,-1.1),t.lineTo(-1.4,-.6),t.lineTo(-1.4,.6),t.lineTo(.3,1.1),t.closePath()):n==="carrier"?t.ellipse(0,0,1.6,1,0,0,J):n==="fighter"?(t.moveTo(1.2,0),t.lineTo(-.6,-.45),t.lineTo(-.2,0),t.lineTo(-.6,.45),t.closePath(),t.ellipse(.25,0,.25,.15,0,0,J)):(t.moveTo(1.4,0),t.lineTo(-1,-.8),t.lineTo(-.4,0),t.lineTo(-1,.8),t.closePath()),Ft.set(n,t),t}var dt=new Map,Wt=[12,20,36];function Xt(n,t){let s=dt.get(n);if(s||(s=new Map,dt.set(n,s)),s.has(t))return s.get(t);let l=Math.ceil(t*2.2*2+8),o=typeof document<"u"?document.createElement("canvas"):{width:l,height:l,getContext:()=>null};o.width=l,o.height=l;let r=o.getContext&&o.getContext("2d");if(!r){let e={canvas:o,size:l,baseRadius:t};return s.set(t,e),e}let u=l/2;r.clearRect(0,0,l,l),r.save(),r.translate(u,u),r.scale(t,t),r.fillStyle="white",r.strokeStyle="white",r.lineWidth=.02;try{r.fill(oi(n))}catch{r.beginPath(),r.arc(0,0,1,0,J),r.fill()}r.fillStyle="rgba(255,255,255,0.9)",n==="corvette"||n==="fighter"?(r.beginPath(),r.ellipse(.25,0,.25,.15,0,0,J),r.fill()):n==="frigate"?r.fillRect(-.2,-.25,.6,.5):n==="destroyer"?r.fillRect(-.9,-.18,1.2,.36):n==="carrier"&&(r.fillStyle="rgba(255,255,255,0.2)",r.fillRect(-.8,-.25,1.6,.5)),r.restore();let f={canvas:o,size:l,baseRadius:t};return s.set(t,f),f}function ri(n){for(let t of Wt)Xt(n,t)}function ai(n,t=Wt[1]){let s=dt.get(n);return s&&s.has(t)?s.get(t):Xt(n,t)}function An(n,t,s=typeof window<"u"&&window.devicePixelRatio||1){let i=Math.max(1,Math.round(t*s));ri(n);let l=dt.get(n)||new Map,o=null,r=1/0;for(let[u,f]of l.entries()){let e=Math.abs(u-i);e<r&&(r=e,o=f)}return o||(o=Xt(n,i)),o}var Se=null;function ht(){if(!a||typeof a.createRadialGradient!="function"){Se=null;return}Se=a.createRadialGradient(I*.6,U*.3,50,I*.6,U*.3,Math.max(I,U)),Se.addColorStop(0,"rgba(60,80,140,0.10)"),Se.addColorStop(1,"rgba(10,12,20,0.0)")}ht();var Hi=Le,Tn=We,Gi=rt,Oi=Be;var me=(n,t=1)=>n===g.RED?`rgba(255,90,90,${t})`:`rgba(80,160,255,${t})`;function si(n){if(n.life<=0)return;let t=n.life/n.max;a.fillStyle=(n.color||"").replace?n.color.replace("$a",t.toFixed(3)):n.color,a.fillRect(n.x,n.y,2,2)}var Ht=class{constructor(t){this.logic=t,this.id=t.id,this.team=t.team,this.x=t.x,this.y=t.y,this.type=t.type}syncFromLogic(){this.x=this.logic.x,this.y=this.logic.y,this.type=this.logic.type,this.alive=this.logic.alive}draw(){let t=this.logic;if(!t.alive)return;let s=qe.some(E=>E.shieldHit&&E.x===t.x&&E.y===t.y&&E.life>0);if(ut){let E=t.x-Math.cos(t.angle)*t.radius*1.2,P=t.y-Math.sin(t.angle)*t.radius*1.2;Tn(E,P,-t.vx*.05+p(-10,10),-t.vy*.05+p(-10,10),.25,me(t.team,"$a"))}let i=t.radius||8,l=ai(t.type),o=An(t.type,i,typeof window<"u"&&window.devicePixelRatio||1);if(o&&o.canvas&&a&&typeof a.drawImage=="function"){a.save(),a.translate(t.x,t.y),a.rotate(t.angle),a.shadowBlur=12,a.shadowColor=me(t.team,.9);let E=o.size,P=i*2/(l.baseRadius*2),y=E*P,R=E*P;a.save(),a.globalCompositeOperation="source-over",a.drawImage(o.canvas,-y/2,-R/2,y,R),a.globalCompositeOperation="source-in",a.fillStyle=me(t.team,.96),a.fillRect(-y/2,-R/2,y,R),a.restore(),a.restore()}else a.save(),a.translate(t.x,t.y),a.rotate(t.angle),a.shadowBlur=12,a.shadowColor=me(t.team,.9),a.fillStyle=me(t.team,.96),t.type==="corvette"?(a.beginPath(),a.moveTo(i*1.5,0),a.lineTo(-i,-i*.7),a.lineTo(-i*.4,0),a.lineTo(-i,i*.7),a.closePath(),a.fill(),a.fillStyle="rgba(255,255,255,.85)",a.beginPath(),a.ellipse(0,0,i*.35,i*.25,0,0,J),a.fill()):t.type==="frigate"?(a.beginPath(),a.moveTo(i*1.6,0),a.quadraticCurveTo(i*.2,-i*1.1,-i*1.1,-i*.6),a.lineTo(-i*.6,0),a.lineTo(-i*1.1,i*.6),a.quadraticCurveTo(i*.2,i*1.1,i*1.6,0),a.closePath(),a.fill(),a.fillStyle="rgba(255,255,255,.75)",a.fillRect(-i*.2,-i*.25,i*.6,i*.5)):t.type==="destroyer"?(a.beginPath(),a.moveTo(i*1.9,0),a.lineTo(i*.3,-i*1.1),a.lineTo(-i*1.4,-i*.6),a.lineTo(-i*1.4,i*.6),a.lineTo(i*.3,i*1.1),a.closePath(),a.fill(),a.fillStyle="rgba(255,255,255,.7)",a.fillRect(-i*.9,-i*.18,i*1.2,i*.36)):t.type==="carrier"?(a.beginPath(),a.ellipse(0,0,i*1.6,i*1,0,0,J),a.fill(),a.fillStyle="rgba(255,255,255,.18)",a.fillRect(-i*.8,-i*.25,i*1.6,i*.5)):t.type==="fighter"?(a.beginPath(),a.moveTo(i*1.2,0),a.lineTo(-i*.6,-i*.45),a.lineTo(-i*.2,0),a.lineTo(-i*.6,i*.45),a.closePath(),a.fill(),a.fillStyle="rgba(255,255,255,.9)",a.beginPath(),a.ellipse(i*.25,0,i*.25,i*.15,0,0,J),a.fill()):(a.beginPath(),a.moveTo(i*1.4,0),a.lineTo(-i,-i*.8),a.lineTo(-i*.4,0),a.lineTo(-i,i*.8),a.closePath(),a.fill()),a.restore();if(typeof t.shield=="number"&&typeof t.shieldMax=="number"){let E=t.shieldMax>0?Math.max(0,Math.min(1,t.shield/t.shieldMax)):0,P=i+4+(1-E)*2;a.save(),a.beginPath(),a.arc(t.x,t.y,P,0,J);let y=a.createRadialGradient(t.x,t.y,P*.6,t.x,t.y,P);y.addColorStop(0,`rgba(140,200,255,${.06})`),y.addColorStop(1,`rgba(80,160,255,${.02})`),a.fillStyle=y,a.globalCompositeOperation="lighter",a.fill();for(let R of Ln){if(R.id!==t.id)continue;let S=Math.max(0,Math.min(1,R.life/.22)),ee=t.shieldMax&&t.shieldMax>0?R.amount/t.shieldMax:Math.min(1,R.amount/(t.hpMax*.6||1)),H=Math.max(.08,Math.min(1,ee)),be=(Math.PI*.25+Math.PI*.6*(1-S))*(.6+1.6*H),V=R.angle-be/2,_e=R.angle+be/2,A=P+4*(1-S)+2*H;a.beginPath(),a.arc(t.x,t.y,A,V,_e),a.lineWidth=(3+6*S)*(1+4*H);let se=Math.min(1,.25+S*(.9+1.6*H));a.strokeStyle=`rgba(160,220,255,${se})`,a.save(),a.shadowBlur=12*H,a.shadowColor="rgba(140,200,255,0.8)",a.stroke(),a.restore()}a.restore()}let r=Math.max(16,i*3.2),u=Math.max(3,i*.4),f=t.x-r/2,e=t.y-(i+12);if(typeof t.shield=="number"&&typeof t.shieldMax=="number"){let E=t.shieldMax>0?Math.max(0,Math.min(1,t.shield/t.shieldMax)):0;a.fillStyle="rgba(255,255,255,.08)",a.fillRect(f,e,r,u),a.fillStyle="rgba(80,160,255,.95)",a.fillRect(f,e,r*E,u)}let c=t.y+(i+8),m=Math.max(0,Math.min(1,t.hp/t.hpMax)),_=Math.min(6,u);a.beginPath(),a.moveTo(f+_,c),a.lineTo(f+r-_,c),a.quadraticCurveTo(f+r,c,f+r,c+_),a.lineTo(f+r,c+u-_),a.quadraticCurveTo(f+r,c+u,f+r-_,c+u),a.lineTo(f+_,c+u),a.quadraticCurveTo(f,c+u,f,c+u-_),a.lineTo(f,c+_),a.quadraticCurveTo(f,c,f+_,c),a.closePath(),a.fillStyle="rgba(255,255,255,.08)",a.fill();let x=Mn.find(E=>E.id===t.id&&E.life>0),b=`rgba(120,220,120,${.95})`;if(x){let E=Math.max(0,Math.min(1,x.life/.45)),P=Math.min(1,x.amount/(t.hpMax||1)),y=Math.floor(220*(1-P*E)),R=Math.floor(60+160*(1-E*P));b=`rgba(${Math.min(255,y)},${Math.min(255,R)},60,${.95})`}a.save(),a.beginPath(),a.moveTo(f+_,c),a.lineTo(f+r-_,c),a.quadraticCurveTo(f+r,c,f+r,c+_),a.lineTo(f+r,c+u-_),a.quadraticCurveTo(f+r,c+u,f+r-_,c+u),a.lineTo(f+_,c+u),a.quadraticCurveTo(f,c+u,f,c+u-_),a.lineTo(f,c+_),a.quadraticCurveTo(f,c,f+_,c),a.closePath(),a.clip(),a.fillStyle=b,a.fillRect(f,c,r*m,u),a.restore(),typeof t.level=="number"&&t.level>1&&(a.save(),a.fillStyle="rgba(255,255,255,0.95)",a.font="700 12px system-ui, sans-serif",a.textAlign="center",a.fillText(`Lv ${t.level}`,t.x,t.y-(i+18)),a.restore())}},Z=L,mt=pe,_t=re,qe=oe,Ln=de,Mn=he,pt={red:0,blue:0},Me=new Map,De=!1,ft=1,ut=!0,lt=0;function Gt(n=null){return Bt(n)}function li(n){let t=Dt(n,I,U);t&&t.score&&(pt=t.score),Z=L,mt=pe,_t=re,qe=oe,Ln=de,Mn=he;let s=new Set(Z.map(i=>i.id));for(let i of Z)Me.has(i.id)?Me.get(i.id).syncFromLogic():Me.set(i.id,new Ht(i));for(let i of Array.from(Me.keys()))s.has(i)||Me.delete(i)}function yn(){if(a.clearRect(0,0,I,U),Se)a.fillStyle=Se,a.fillRect(0,0,I,U);else{let s=a.createRadialGradient(I*.6,U*.3,50,I*.6,U*.3,Math.max(I,U));s.addColorStop(0,"rgba(60,80,140,0.10)"),s.addColorStop(1,"rgba(10,12,20,0.0)"),a.fillStyle=s,a.fillRect(0,0,I,U)}for(let s of Rn){let i=.6+.4*Math.sin(s.phase);a.globalAlpha=Nt(.5*i*(.6+.5*s.d),0,1),a.fillStyle="#e9f2ff",a.fillRect(s.x,s.y,s.r,s.r)}a.globalAlpha=1;for(let s of qe){let i=Nt(s.life/.25,0,1);a.strokeStyle=me(s.team,i*.6),a.lineWidth=2,a.beginPath(),a.arc(s.x,s.y,s.r,0,J),a.stroke()}for(let s of mt)a.save(),a.shadowBlur=12,a.shadowColor=me(s.team,.9),a.fillStyle=me(s.team,.95),a.beginPath(),a.arc(s.x,s.y,s.radius||2.2,0,J),a.fill(),a.restore();for(let s of _t)si(s);for(let s of Me.values())s.draw();let n=Z.some(s=>s.alive&&s.team===g.RED),t=Z.some(s=>s.alive&&s.team===g.BLUE);if(!n||!t){a.save(),a.textAlign="center",a.font="700 36px Inter, system-ui, sans-serif";let s=n?"Red":t?"Blue":"Nobody",i=n?me(g.RED,.95):t?me(g.BLUE,.95):"rgba(255,255,255,.9)";a.fillStyle=i,a.shadowBlur=14,a.shadowColor=i,a.fillText(`${s} Wins!`,I/2,64),a.restore()}}function Ot(n){lt||(lt=n);let t=(n-lt)/1e3;lt=n;let s=Nt(t,0,.033)*(De?ft:0);if(li(s),T&&T.type==="webgl"&&typeof T.render=="function")try{T.render({W:I,H:U,ships:Z,bullets:mt,stars:Rn,particles:_t,flashes:qe,shipsVMap:Me,score:pt})}catch(i){console.error("WebGL render error, falling back to 2D render",i),yn()}else yn();ci(),requestAnimationFrame(Ot)}var Wi=document.getElementById("startPause"),Xi=document.getElementById("reset"),Vi=document.getElementById("addRed"),Yi=document.getElementById("addBlue"),qi=document.getElementById("toggleTrails"),$i=document.getElementById("speed"),En=document.getElementById("redScore"),bn=document.getElementById("blueScore"),wn=document.getElementById("stats"),zi=document.getElementById("seedBtn"),Ki=document.getElementById("formationBtn"),Ye=document.getElementById("continuousCheckbox");Ye||(Ye=document.createElement("input"),Ye.type="checkbox",Ye.id="continuousCheckbox");Ut&&typeof at=="function"&&at(Ye);function ci(){try{let n=`Red ${pt.red}`,t=`Blue ${pt.blue}`,s=`Ships: ${Z.filter(i=>i.alive).length}  Bullets: ${mt.length}  Particles: ${_t.length}`;En.textContent!==n&&(En.textContent=n),bn.textContent!==t&&(bn.textContent=t),wn.textContent!==s&&(wn.textContent=s)}catch{}}function fi(){if(typeof document>"u")return null;let n=document.getElementById("rendererBackendBadge");if(!n){n=document.createElement("div"),n.id="rendererBackendBadge",n.style.position="fixed",n.style.right="12px",n.style.top="12px",n.style.padding="6px 10px",n.style.background="rgba(0,0,0,0.6)",n.style.color="#fff",n.style.fontFamily="system-ui,Segoe UI,Roboto,Arial",n.style.fontSize="12px",n.style.borderRadius="6px",n.style.zIndex="99999",n.style.pointerEvents="auto",n.style.cursor="default",n.title="Renderer backend";try{document.body.appendChild(n)}catch{}}return n}function ct(n,t){let s=fi();s&&(s.textContent=n,t&&(s.title=t))}var Qi=Mt;function ui(n){return Ct(n)}function kt(){return Pt()}var ji=St,Ji=Ae;function di(){if(typeof window>"u"||!document||window.__uiHandlersInstalled)return;Object.defineProperty(window,"__uiHandlersInstalled",{value:!0,configurable:!1,writable:!1});let n=document.getElementById("startPause");n&&n.addEventListener("click",()=>{De=!De,n.textContent=De?"\u23F8 Pause":"\u25B6 Start"});let t=document.getElementById("reset");t&&t.addEventListener("click",()=>{Gt()});let s=document.getElementById("addRed");s&&s.addEventListener("click",()=>{Z.push(new xe(g.RED,p(40,I*.35),p(80,U-80))),st("+1 Red")});let i=document.getElementById("addBlue");i&&i.addEventListener("click",()=>{Z.push(new xe(g.BLUE,p(I*.65,I-40),p(80,U-80))),st("+1 Blue")});let l=document.getElementById("toggleTrails");l&&l.addEventListener("click",()=>{ut=!ut,l.textContent=`\u2604 Trails: ${ut?"On":"Off"}`});let o=document.getElementById("speed");o&&o.addEventListener("click",()=>{let c=[.5,1,2,4],m=(c.indexOf(ft)+1)%c.length;ft=c[m],o.textContent=`Speed: ${ft}\xD7`});let r=document.getElementById("seedBtn");r&&r.addEventListener("click",()=>{let c=prompt("Enter numeric seed (32-bit):",Math.random()*1e9>>>0);c!==null&&Gt(Number(c))});let u=document.getElementById("formationBtn");u&&u.addEventListener("click",()=>{let c=Z.filter(b=>b.alive&&b.team===g.RED),m=Z.filter(b=>b.alive&&b.team===g.BLUE),_=20,x=6;c.forEach((b,E)=>{let P=E%x,y=Math.floor(E/x);b.x=I*.25-P*20,b.y=U*.5+(y-x/2)*_,b.vx=b.vy=0}),m.forEach((b,E)=>{let P=E%x,y=Math.floor(E/x);b.x=I*.75+P*20,b.y=U*.5+(y-x/2)*_,b.vx=b.vy=0}),st("Fleets re-formed")});let f=document.getElementById("reinforceFreqBtn"),e=[0,.5,1,2];if(f){let c=()=>{let m=kt();f.textContent=m>0?`${m}s`:"Every step"};c(),f.addEventListener("click",()=>{let m=kt(),_=(e.indexOf(m)+1)%e.length;ui(e[_]),c();let x=kt();st(`Reinforcement check: ${x>0?x+"s":"every step"}`)})}w&&typeof w.addEventListener=="function"&&w.addEventListener("click",c=>{qe.push({x:c.clientX,y:c.clientY,r:24,life:.25,team:He(0,1)});for(let _=0;_<24;_++){let x=p(0,J),b=p(40,220);Tn(c.clientX,c.clientY,Math.cos(x)*b,Math.sin(x)*b,p(.2,1),"rgba(255,255,255,$a)")}})}Z.length===0&&Gt();var T=null,M={triedWebGL:!1,gl2:!1,gl1:!1,importError:null,used:null};try{if(typeof window<"u"&&typeof HTMLCanvasElement<"u"&&!HTMLCanvasElement.prototype.__getContextWrapped){let n=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(t,s){try{let i=n.call(this,t,s);if(!i)try{let l=new Error("getContext returned null for type "+t).stack;if(M.getContextNullStacks=M.getContextNullStacks||[],M.getContextNullStacks.push({type:t,attrs:s,stack:l,time:Date.now()}),typeof window<"u")try{window.__rendererDiag=M}catch{}console.warn("DEBUG: HTMLCanvasElement.getContext returned null for",t,s,`
stack:`,l)}catch{}return i}catch(i){try{let l=new Error("getContext threw for type "+t).stack;if(M.getContextThrowStacks=M.getContextThrowStacks||[],M.getContextThrowStacks.push({type:t,attrs:s,err:String(i),stack:l,time:Date.now()}),typeof window<"u")try{window.__rendererDiag=M}catch{}console.warn("DEBUG: HTMLCanvasElement.getContext threw",i,`
stack:`,l)}catch{}throw i}};try{Object.defineProperty(HTMLCanvasElement.prototype,"__getContextWrapped",{value:!0,configurable:!1})}catch{HTMLCanvasElement.prototype.__getContextWrapped=!0}}}catch{}var ae=null,Ue=!1;async function Cn(n={}){if(typeof window<"u"&&(window.initRenderer=Cn),typeof window<"u"&&window.__autoRendererStarted){if(Ue&&T)return T;if(ae)return await ae,T}if(Ue&&T)return T;if(ae)return await ae,T;typeof window<"u"&&(window.__autoRendererStarted=!0),ae=(async()=>{let{canvas:t=w,preferWebGL:s=!0,startLoop:i=!0}=n;if(!t)throw new Error("No canvas available to initialize renderer");if(di(),s&&t.getContext){M.triedWebGL=!0;let l=[{},{antialias:!1},{powerPreference:"high-performance"},{antialias:!1,powerPreference:"high-performance"},{antialias:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1}],o=[],r=null;for(let e of l)try{let c=t.getContext("webgl2",e);o.push({attrs:e,ok:!!c}),c&&!r&&(r=c)}catch(c){o.push({attrs:e,ok:!1,err:String(c)})}let u=[],f=null;if(!r)for(let e of l)try{let c=t.getContext("webgl",e);u.push({attrs:e,ok:!!c}),c&&!f&&(f=c)}catch(c){u.push({attrs:e,ok:!1,err:String(c)})}if(M.attempts={webgl2:o,webgl:u},M.gl2=!!r,M.gl1=!!f,r||f)try{let{createWebGLRenderer:e}=await Promise.resolve().then(()=>(xn(),vn));T=e(t,{webgl2:!!r,atlasAccessor:(m,_)=>An(m,_,typeof window<"u"&&window.devicePixelRatio||1),atlasLODs:Wt}),T.init();try{w=t,typeof window<"u"&&(I=w.width=window.innerWidth,U=w.height=window.innerHeight),a=w&&typeof w.getContext=="function"&&w.getContext("2d")||Ie(),ht(),typeof Ve=="function"&&Ve()}catch{a=a||Ie()}if(i&&T.start(()=>{requestAnimationFrame(Ot)}),M.used="webgl",typeof window<"u")try{window.__rendererDiag=M}catch{}console.info("Renderer: using WebGL",{webgl2:!!r});try{ct("WebGL"+(r?"2":"1"),M.importError||"Using GPU WebGL renderer")}catch{}return T}catch(e){M.importError=String(e&&e.stack?e.stack:e),console.warn("WebGL init failed, falling back to 2D canvas renderer",e);try{ct("Canvas (WebGL failed)",M.importError)}catch{}}else{M.importError="No WebGL context (getContext returned null)",console.info("Renderer: no WebGL context available; using Canvas 2D fallback");try{ct("Canvas (no WebGL)",M.importError)}catch{}}}if(!T){if(T={type:"canvas"},M.used="canvas",typeof window<"u")try{window.__rendererDiag=M}catch{}console.info("Renderer: using Canvas 2D fallback");try{ct("Canvas",M.importError||"Using Canvas 2D fallback")}catch{}try{w=t,typeof window<"u"&&(I=w.width=window.innerWidth,U=w.height=window.innerHeight),w&&typeof w.getContext=="function"?a=w.getContext("2d")||Ie():a=Ie(),ht(),typeof Ve=="function"&&Ve()}catch{a=a||Ie()}i&&requestAnimationFrame(Ot)}return T})();try{let t=await ae;return Ue=!0,t}finally{ae&&(ae=null)}}function Zi(){return T?T.type:null}function eo(){return M}function hi(){if(T&&typeof T.stop=="function"&&T.stop(),T&&typeof T.destroy=="function"&&T.destroy(),T=null,Ue=!1,ae=null,typeof window<"u")try{delete window.__autoRendererStarted}catch{}}function to(){if(hi(),Ue=!1,ae=null,typeof window<"u")try{delete window.__autoRendererStarted}catch{}}function no(){if(Ue=!1,ae=null,typeof window<"u")try{delete window.__autoRendererStarted}catch{}}typeof window<"u"&&(window.startSimulation=function(){try{De=!0;let t=document.getElementById("startPause");t&&(t.textContent="\u23F8 Pause")}catch{}},window.stopSimulation=function(){try{De=!1;let t=document.getElementById("startPause");t&&(t.textContent="\u25B6 Start")}catch{}});function Ie(){let n=()=>{},t=new Proxy({},{get(s,i){return i==="createRadialGradient"?()=>({addColorStop:n}):i==="measureText"?()=>({width:0}):i==="getImageData"?()=>({data:new Uint8ClampedArray(4),width:1,height:1}):n},set(){return!0}});return t.fillStyle="#000",t.strokeStyle="#000",t.globalAlpha=1,t.lineWidth=1,t.font="12px sans-serif",t}export{Oi as Particle,no as _internal_resetInitFlags,Tn as acquireParticle,Se as backgroundGradient,mt as bullets,Nt as clamp,ji as evaluateReinforcement,qe as flashes,ai as getHullAtlas,An as getHullAtlasForRadius,oi as getHullPath,kt as getReinforcementInterval,eo as getRendererDiagnostics,Zi as getRendererType,Ji as handleReinforcement,Mn as healthFlashes,dt as hullAtlases,Ft as hullPaths,Cn as initRenderer,Ve as initStars,Hi as particlePool,_t as particles,ht as recomputeBackgroundGradient,Gi as releaseParticle,Gt as reset,Qi as resetReinforcementCooldowns,ui as setReinforcementInterval,Ln as shieldFlashes,Z as ships,Me as shipsVMap,Rn as stars,hi as stopRenderer,to as stopRendererAndAllowReinit,me as teamColor};
